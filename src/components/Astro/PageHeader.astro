---
/**
 * @description Component for creating a flexible page header with optional image and pattern background
 * @param {Props} props - PageHeader configuration
 * @example
 * ```astro
 * // Basic header with just text
 * <PageHeader
 *   heading="Welcome"
 *   description="Learn more about our services"
 * />
 *
 * // Header with image
 * <PageHeader
 *   heading="About Us"
 *   description="Meet our team"
 *   image={teamImage}
 *   imageAlt="Team photo"
 * />
 *
 * // Header with pattern background
 * <PageHeader
 *   heading="Services"
 *   description="What we offer"
 *   backgroundPattern="circuit"
 *   patternOpacity={0.1}
 * />
 *
 * // Full featured header
 * <PageHeader
 *   heading="Portfolio"
 *   description="Our latest work"
 *   image={portfolioImage}
 *   imageAlt="Project showcase"
 *   animate={true}
 *   backgroundPattern="dots"
 *   patternOpacity={0.2}
 *   class="my-custom-header"
 * />
 * ```
 * @note
 * - Responsive layout with mobile-first design
 * - Optional animated image with spin-and-grow effect
 * - Configurable pattern background with opacity control
 * - Theme-based styling and rounded corners
 * - Balanced text wrapping for headings
 * - Staggered build-in animations for text elements
 */

import type { AstroBuiltinAttributes } from "astro";
import type { ImageMetadata } from "astro";
import PatternBackground from "@components/Astro/utils/PatternBackground.astro";
import Image from "astro/components/Image.astro";

export interface Props {
	/** Main heading text */
	heading: string;
	/** Optional subheading or description text */
	description?: string;
	/** Optional image to display */
	image?: ImageMetadata;
	/** Alt text for the image */
	imageAlt?: string;
	/** Controls image animation (default: true) */
	animate?: boolean;
	/** Pattern name for background decoration */
	backgroundPattern?: string;
	/** Opacity value for background pattern (0-1) */
	patternOpacity?: number;
	/** Optional CSS classes */
	class?: string | AstroBuiltinAttributes["class:list"];
}

const {
	heading,
	description,
	image,
	imageAlt,
	animate = true,
	backgroundPattern,
	patternOpacity,
	class: className,
} = Astro.props;
---

<div
	class:list={[
		"relative flex flex-col items-center justify-between w-full p-4 lg:-mt-20 lg:flex-row lg:p-24",
		className,
	]}
>
	{
		backgroundPattern && (
			<PatternBackground
				pattern={backgroundPattern}
				patternOpacity={patternOpacity}
				animate={animate}
			/>
		)
	}
	<div class="flex flex-col items-start justify-center lg:w-1/2 mb-8 lg:mb-0">
		<h2
			class:list={[
				"font-display text-5xl font-medium tracking-tight text-neutral-950 [text-wrap:balance] sm:text-7xl",
				{ "build-in": animate },
			]}
		>
			{heading}
		</h2>
		<p class:list={[
			"mt-4 text-xl leading-relaxed text-theme-primary",
			{ "build-in": animate },
		]}>{description}</p>
	</div>

	{
		image && (
			<div class="my-10 lg:w-5/12 lg:pl-8">
				<div class="relative overflow-hidden rounded-full aspect-square max-w-sm md:max-w-lg">
					<Image
						src={image}
						alt={imageAlt ?? "Image"}
						class:list={[
							"w-full h-full object-cover",
							{ "spin-and-grow": animate },
							{ "rounded-theme": true },
						]}
						width={500}
						height={500}
						loading="eager"
					/>
				</div>
			</div>
		)
	}
</div>

<style>
	h2.build-in {
		animation-delay: 0.2s;
	}

	p.build-in {
		animation-delay: 0.4s;
	}
</style>
